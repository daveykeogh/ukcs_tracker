import urllib2
from time import sleep

URL="http://www.ukcs.net/phpua/index.php"

BACKOFF=[0,0.1,2,5,15,30]

class DataRetrievalException(Exception):
	pass


class Retrieve():
	"""
	Class for downloading UKCS data
	"""
	def __init__(self):
		self.request = urllib2.Request(URL)
		self._back_off_request()

	def _back_off_request(self):
		for time in BACKOFF:
			try:
				self.response = urllib2.urlopen(self.request)
				self.html = self.response.read()
				break
			except:
				print "Call failed"
				
	@property
	def html(self):
		return self.html
	

if __name__=='__main__':
	a = Retrieve()
